-- This script was generated by a beta version of the ERD tool in pgAdmin 4.
-- Please log an issue at https://redmine.postgresql.org/projects/pgadmin4/issues/new if you find any bugs, including reproduction steps.
BEGIN;


CREATE TABLE IF NOT EXISTS public.accounts
(
    id bigint NOT NULL DEFAULT nextval('accounts_id_seq'::regclass),
    accountid bigint,
    accounttype character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT accounts_pkey PRIMARY KEY (id),
    CONSTRAINT uk_dwcojt43ushaktcx9jx5qhu84 UNIQUE (accountid)
);

CREATE TABLE IF NOT EXISTS public.bank_account_no
(
    id bigint NOT NULL DEFAULT nextval('bank_account_no_id_seq'::regclass),
    accountno bigint,
    account_id bigint,
    branch_id bigint,
    user_id bigint NOT NULL,
    CONSTRAINT bank_account_no_pkey PRIMARY KEY (id),
    CONSTRAINT uk_galapfn4m8m735uj86qbdc1ba UNIQUE (accountno)
);

CREATE TABLE IF NOT EXISTS public.branch
(
    id bigint NOT NULL DEFAULT nextval('branch_id_seq'::regclass),
    branchid bigint,
    branchlocation character varying(255) COLLATE pg_catalog."default",
    CONSTRAINT branch_pkey PRIMARY KEY (id),
    CONSTRAINT uk_4euo77bp1b27rf1v7djlv2huu UNIQUE (branchid)
);

CREATE TABLE IF NOT EXISTS public.transactions
(
    id bigint NOT NULL DEFAULT nextval('transactions_id_seq'::regclass),
    amount bigint,
    date character varying(255) COLLATE pg_catalog."default",
    process character varying(255) COLLATE pg_catalog."default",
    transactionid bigint,
    bankaccount_id bigint NOT NULL,
    CONSTRAINT transactions_pkey PRIMARY KEY (id),
    CONSTRAINT uk_40wvgh1xmhp28aoi67dbbxuqm UNIQUE (amount),
    CONSTRAINT uk_6tnfc08o8gqu7nf79gd4cx5uf UNIQUE (transactionid)
);

CREATE TABLE IF NOT EXISTS public.user_info
(
    id bigint NOT NULL DEFAULT nextval('user_info_id_seq'::regclass),
    lastname character varying(255) COLLATE pg_catalog."default",
    name character varying(255) COLLATE pg_catalog."default",
    userid bigint,
    CONSTRAINT user_info_pkey PRIMARY KEY (id),
    CONSTRAINT uk_h866tu39tulfygmxtvfadfvgt UNIQUE (userid)
);

ALTER TABLE IF EXISTS public.bank_account_no
    ADD CONSTRAINT fk6dhoyhve1qurdapyet9iu07nq FOREIGN KEY (branch_id)
    REFERENCES public.branch (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.bank_account_no
    ADD CONSTRAINT fkcu0tn67g85cs8odhd5y60ikrt FOREIGN KEY (account_id)
    REFERENCES public.accounts (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.bank_account_no
    ADD CONSTRAINT fkm85oddp9k936v8yrixb8ege27 FOREIGN KEY (user_id)
    REFERENCES public.user_info (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;


ALTER TABLE IF EXISTS public.transactions
    ADD CONSTRAINT fknx4fwe8e5157mi0qcrj3a385d FOREIGN KEY (bankaccount_id)
    REFERENCES public.bank_account_no (id) MATCH SIMPLE
    ON UPDATE NO ACTION
    ON DELETE NO ACTION;

END;